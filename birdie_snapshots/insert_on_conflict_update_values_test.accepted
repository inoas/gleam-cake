---
version: 1.1.7
title: insert_on_conflict_update_values_test
file: ./test/cake_test/insert_on_conflict_update_test.gleam
test_name: insert_on_conflict_update_values_test
---
#(
  InsertQuery(Insert(
    InsertIntoTable("counters"),
    InsertColumns(["name", "counter"]),
    NoInsertModifier,
    InsertSourceRows([
      InsertRow([
        InsertParam(
          "name",
          StringParam("Whiskers"),
        ),
        InsertParam(
          "counter",
          IntParam(1),
        ),
      ]),
      InsertRow([
        InsertParam(
          "name",
          StringParam("Karl"),
        ),
        InsertParam(
          "counter",
          IntParam(1),
        ),
      ]),
      InsertRow([
        InsertParam(
          "name",
          StringParam("Clara"),
        ),
        InsertParam(
          "counter",
          IntParam(1),
        ),
      ]),
    ]),
    InsertConflictUpdate(
      InsertConflictTarget(["name"]),
      NoWhere,
      Update(
        NoUpdateTable,
        NoUpdateModifier,
        UpdateSets([
          UpdateExpressionSet(
            ["counter"],
            "counters.counter + 1",
          ),
        ]),
        NoFrom,
        NoJoins,
        NoWhere,
        NoReturning,
        NoEpilog,
        NoComment,
      ),
    ),
    Returning(["name", "counter"]),
    NoEpilog,
    NoComment,
  )),
  InsertQuery(Insert(
    InsertIntoTable("counters"),
    InsertColumns(["name", "counter"]),
    NoInsertModifier,
    InsertSourceRows([
      InsertRow([
        InsertParam(
          "name",
          StringParam("Whiskers"),
        ),
        InsertParam(
          "counter",
          IntParam(1),
        ),
      ]),
      InsertRow([
        InsertParam(
          "name",
          StringParam("Karl"),
        ),
        InsertParam(
          "counter",
          IntParam(1),
        ),
      ]),
      InsertRow([
        InsertParam(
          "name",
          StringParam("Clara"),
        ),
        InsertParam(
          "counter",
          IntParam(1),
        ),
      ]),
    ]),
    InsertConflictUpdate(
      InsertConflictTarget(["name"]),
      NoWhere,
      Update(
        NoUpdateTable,
        NoUpdateModifier,
        UpdateSets([
          UpdateExpressionSet(
            ["counter"],
            "counters.counter + 1",
          ),
        ]),
        NoFrom,
        NoJoins,
        NoWhere,
        NoReturning,
        NoEpilog,
        NoComment,
      ),
    ),
    Returning(["name", "counter"]),
    NoEpilog,
    NoComment,
  )),
)